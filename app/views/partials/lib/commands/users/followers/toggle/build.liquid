{% liquid
  if params.action_name == 'follow'
    assign operation = 'array_append'
  endif

  if params.action_name == 'unfollow'
    assign operation = 'array_remove'
  endif
%}

{% parse_json object %}
{
  "properties": [
    { "name": "followed_user_ids", "{% print operation %}": {{ params.user_id | json }} }
  ],
  "id": {{ current_user_id | json }}
}
{% endparse_json %}

{% return_rc object %}
