{% comment %}
  what we do:

  this is user_followed_user event

  actor: following
  target: follower

  TODO private public feed

{% endcomment %}

{% liquid
  function_rc rules = 'lib/data/queries/activities/rules', type: event.type

  log rules, type: 'showme'

  if rules
    assign ids = '[]' | parse_json | add_to_array: event.actor.id

    function_rc audience = 'lib/data/queries/activities/audience', id: event.actor.id

    render 'lib/commands/activities/publish', uuid: event.uuid, type: "user", ids: audience
    render 'lib/commands/activities/publish', uuid: event.uuid, type: "user", ids: ids
  endif
%}

